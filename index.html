<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ã˜veApp â€“ Januar 2026</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #f4f6fb;
  --card: #ffffff;
  --primary: #6366f1;
  --primary-soft: #eef2ff;
  --success: #22c55e;
  --success-soft: #dcfce7;
  --text: #111827;
  --muted: #6b7280;
  --radius: 18px;
}

* { box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(180deg,#f8fafc,var(--bg));
  margin: 0;
  padding: 14px;
  color: var(--text);
}

h1 { text-align:center; margin:10px 0 18px; }
h2 { margin:8px 0 16px; }

button {
  border:none;
  border-radius:14px;
  padding:12px 14px;
  background:var(--primary);
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
}
button:hover { opacity:.9; transform:translateY(-1px); }
button:active { transform:none; }

#menu button {
  width:100%;
  margin-bottom:12px;
  font-size:16px;
}

#menu,#calendarScreen,#materialScreen { display:none; }

/* CALENDAR */
#calendar {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:16px;
}

.day {
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.06);
}

.day-title { font-weight:700; margin-bottom:6px; }
.day-note {
  font-size:13px;
  color:var(--muted);
  font-style:italic;
  margin-bottom:10px;
}

/* SESSIONS */
.session {
  background:var(--primary-soft);
  color:var(--primary);
  border-radius:12px;
  padding:10px 12px;
  width:100%;
  text-align:left;
  margin-bottom:8px;
  font-weight:600;
}
.session.done {
  background:var(--success-soft);
  color:#065f46;
  text-decoration:line-through;
}

/* TOTAL BAR */
#totalBar {
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
  margin-top:20px;
}
#totalFill {
  background:linear-gradient(90deg,#4ade80,#22c55e);
  padding:10px;
  color:#064e3b;
  font-weight:700;
  width:0%;
  text-align:center;
  transition:.3s;
}

/* FORM */
select,input[type=text] {
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid #e5e7eb;
  margin-bottom:12px;
  font-size:14px;
}

/* MODAL */
#materialDialog {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(15,23,42,.45);
  backdrop-filter:blur(6px);
}
#materialDialog .box {
  background:white;
  max-width:340px;
  margin:30% auto;
  padding:20px;
  border-radius:22px;
  box-shadow:0 30px 60px rgba(0,0,0,.25);
}

canvas {
  margin-top:26px;
  background:white;
  border-radius:var(--radius);
  padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.06);
}
</style>
</head>

<body>

<h1>Ã˜veApp</h1>

<div id="menu">
  <button onclick="openMonth('2026-01')">ðŸ“… Januar 2026</button>
  <button onclick="openMaterialScreen()">ðŸŽµ Ã˜ve-materialer</button>
</div>

<div id="calendarScreen">
  <button style="background:#e5e7eb;color:#111" onclick="goBackMenu()">â¬… Tilbage</button>
  <h2 id="monthTitle"></h2>
  <div id="calendar"></div>
  <canvas id="progressChart" height="220"></canvas>
  <div id="totalBar"><div id="totalFill">0 timer</div></div>
</div>

<div id="materialScreen">
  <button style="background:#e5e7eb;color:#111" onclick="goBackMenu()">â¬… Tilbage</button>
  <h2>Ã˜ve-materiale</h2>
  <div id="materialList"></div>
</div>

<!-- MODAL -->
<div id="materialDialog">
  <div class="box">
    <h3>Hvad har du Ã¸vet?</h3>
    <select id="materialSelect">
      <option value="">â€“ VÃ¦lg tidligere â€“</option>
    </select>
    <input id="materialInput" type="text" placeholder="Eller skriv nyt materiale">
    <button onclick="confirmMaterial()">OK</button>
    <button style="background:#e5e7eb;color:#111" onclick="closeMaterialDialog()">Annuller</button>
  </div>
</div>

<script>
// DATA
const instruments=["Orgel","Trommer","Klaver"];
let selectedMonth="2026-01";
let done=JSON.parse(localStorage.getItem("done")||"{}");
let materials=JSON.parse(localStorage.getItem("materials")||"{}");
let currentSessionId=null;

const schedule={
"2026-01-01":{note:"",sessions:[["7â€“8","Orgel"],["11â€“12","Trommer"],["13â€“14","Klaver"]]},
"2026-01-02":{note:"",sessions:[["7â€“8","Orgel"],["9â€“10","Trommer"],["14â€“15","Klaver"]]},
"2026-01-03":{note:"",sessions:[["7â€“8","Orgel"],["9â€“10","Trommer"],["12â€“13","Klaver"]]},
"2026-01-04":{note:"",sessions:[["7â€“8","Orgel"],["9â€“10","Trommer"],["14â€“15","Klaver"]]},
"2026-01-05":{note:"Orgelundervisning kl. 12",sessions:[["7â€“8","Orgel"],["13â€“14","Klaver"]]}
};

// HELPERS
function save(){
  localStorage.setItem("done",JSON.stringify(done));
  localStorage.setItem("materials",JSON.stringify(materials));
}

function totalHours(){
  return Object.values(done).filter(Boolean).length;
}

function updateTotal(){
  const t=totalHours();
  totalFill.textContent=t+" timer";
  totalFill.style.width=Math.min(t*6,100)+"%";
}

// CALENDAR
function renderCalendar(){
  monthTitle.textContent=selectedMonth;
  calendar.innerHTML="";
  Object.keys(schedule).forEach(date=>{
    if(!date.startsWith(selectedMonth)) return;
    const d=schedule[date];
    const box=document.createElement("div");
    box.className="day";
    box.innerHTML=`<div class="day-title">${date}</div>`;
    if(d.note) box.innerHTML+=`<div class="day-note">${d.note}</div>`;
    d.sessions.forEach((s,i)=>{
      const id=date+"-"+i;
      const b=document.createElement("button");
      b.className="session"+(done[id]?" done":"");
      b.textContent=`${s[0]} â€“ ${s[1]}`;
      b.onclick=()=>selectMaterial(id);
      box.appendChild(b);
    });
    calendar.appendChild(box);
  });
  updateTotal();
  updateChart();
}

// MATERIAL
function selectMaterial(id){
  if(done[id]){
    delete done[id]; delete materials[id];
    save(); renderCalendar(); return;
  }
  currentSessionId=id;
  materialSelect.innerHTML=`<option value="">â€“ VÃ¦lg tidligere â€“</option>`;
  [...new Set(Object.values(materials))].forEach(m=>{
    const o=document.createElement("option");
    o.value=o.textContent=m;
    materialSelect.appendChild(o);
  });
  materialInput.value="";
  materialDialog.style.display="block";
}

function confirmMaterial(){
  const m=materialInput.value.trim()||materialSelect.value;
  if(!m) return;
  done[currentSessionId]=true;
  materials[currentSessionId]=m;
  save();
  closeMaterialDialog();
  renderCalendar();
}

function closeMaterialDialog(){
  materialDialog.style.display="none";
  currentSessionId=null;
}

// CHART
let chart;
function updateChart(){
  const labels=Object.keys(schedule);
  const data=instruments.map(inst =>
    labels.map(d =>
      schedule[d].sessions.filter((_,i)=>done[d+"-"+i]&&schedule[d].sessions[i][1]===inst).length
    )
  );
  if(chart) chart.destroy();
  chart=new Chart(progressChart,{
    type:"line",
    data:{labels,datasets:instruments.map((i,idx)=>({label:i,data:data[idx],tension:.3}))},
    options:{scales:{y:{beginAtZero:true}}}
  });
}

// MATERIAL SCREEN
function renderMaterialScreen(){
  materialList.innerHTML="";
  const c={};
  Object.values(materials).forEach(m=>c[m]=(c[m]||0)+1);
  Object.keys(c).forEach(m=>{
    const d=document.createElement("div");
    d.textContent=`${m}: ${c[m]} timer`;
    materialList.appendChild(d);
  });
}

// NAV
function goBackMenu(){
  menu.style.display="block";
  calendarScreen.style.display="none";
  materialScreen.style.display="none";
}
function openMonth(m){
  selectedMonth=m;
  menu.style.display="none";
  calendarScreen.style.display="block";
  renderCalendar();
}
function openMaterialScreen(){
  menu.style.display="none";
  materialScreen.style.display="block";
  renderMaterialScreen();
}

menu.style.display="block";
</script>

</body>
</html>
